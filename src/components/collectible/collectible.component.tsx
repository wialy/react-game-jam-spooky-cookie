import { useEffect, useRef } from "react";
import styles from "./collectible.styles.module.css";

// teal-like colors
const COLORS = [
  "#610C9F",
  "#940B92",
  "#E95793",
  "#46C2CB",
  "#618264",
  "#79AC78",
  "#898121",
];

export const Collectible = () => {
  const size = "75%";

  const color1 = useRef(COLORS[Math.floor(Math.random() * COLORS.length)]);
  const color2 = useRef(COLORS[Math.floor(Math.random() * COLORS.length)]);

  const animationDelay = useRef(Math.random() * 1000);
  const isAnimating = useRef(false);

  useEffect(() => {
    const timeout = setTimeout(() => {
      isAnimating.current = true;
    }, animationDelay.current);

    return () => {
      clearTimeout(timeout);
    };
  }, []);

  return (
    <svg
      width={size}
      height={size}
      viewBox="0 0 64 64"
      fill="none"
      // style={{ transform: "rotate(" + rotation.current + "deg)" }}
      className={isAnimating.current ? styles.container : undefined}
    >
      <g clipPath="url(#clip0_9_207)">
        <path
          d="M51.3487 33.5092C50.4319 32.7119 50.4319 31.2881 51.3487 30.4908L59.7603 23.176C61.1799 21.9414 63.3638 23.1717 63.0435 25.0256L61.8974 31.6595C61.8584 31.8848 61.8584 32.1152 61.8974 32.3405L63.0435 38.9744C63.3638 40.8282 61.1799 42.0586 59.7603 40.824L51.3487 33.5092Z"
          fill={color1.current}
        />
        <path
          d="M12.6513 33.5092C13.5681 32.7119 13.5681 31.2881 12.6513 30.4908L4.23975 23.176C2.82011 21.9414 0.636247 23.1717 0.956532 25.0256L2.10263 31.6595C2.14156 31.8848 2.14156 32.1152 2.10263 32.3405L0.956532 38.9744C0.636246 40.8282 2.8201 42.0586 4.23974 40.824L12.6513 33.5092Z"
          fill={color1.current}
        />
        <rect
          x="11"
          y="19.489"
          width="42"
          height="25.022"
          rx="6"
          fill={color2.current}
        />
        <path
          opacity="0.3"
          d="M45.6197 22.8757C45.6197 25.9019 43.1664 28.3552 40.1401 28.3552C37.1139 28.3552 34.6606 25.9019 34.6606 22.8757C34.6606 21.5973 35.0984 20.4211 35.8322 19.489H44.4481C45.1819 20.4211 45.6197 21.5973 45.6197 22.8757ZM53 30.4639C52.9016 30.4557 52.8022 30.4516 52.7017 30.4516C50.7308 30.4516 49.133 32.0494 49.133 34.0203C49.133 35.9912 50.7308 37.589 52.7017 37.589C52.8022 37.589 52.9016 37.5848 53 37.5767V30.4639ZM50.2306 43.5679C50.5381 42.9124 50.7099 42.1806 50.7099 41.4087C50.7099 38.5974 48.4309 36.3185 45.6197 36.3185C42.8084 36.3185 40.5294 38.5974 40.5294 41.4087C40.5294 42.5763 40.9226 43.6522 41.5837 44.511H47C48.1894 44.511 49.298 44.1649 50.2306 43.5679ZM16.8575 44.5094C17.5342 43.8599 17.9554 42.9463 17.9554 41.9343C17.9554 39.9634 16.3577 38.3656 14.3867 38.3656C13.0327 38.3656 11.8548 39.1197 11.2501 40.2308C11.9765 42.663 14.204 44.4475 16.8575 44.5094ZM11 33.4368C12.8864 33.3421 14.3867 31.7826 14.3867 29.8727C14.3867 27.9628 12.8864 26.4033 11 26.3086V33.4368ZM16.0716 19.5604C15.5244 20.1875 15.193 21.0078 15.193 21.9054C15.193 23.8763 16.7908 25.4741 18.7617 25.4741C20.7327 25.4741 22.3304 23.8763 22.3304 21.9054C22.3304 20.9733 21.9731 20.1246 21.3879 19.489H17C16.6842 19.489 16.3742 19.5134 16.0716 19.5604ZM27.9719 42.1239C30.4765 42.1239 32.5068 40.0936 32.5068 37.589C32.5068 35.0844 30.4765 33.0541 27.9719 33.0541C25.4673 33.0541 23.437 35.0844 23.437 37.589C23.437 40.0936 25.4673 42.1239 27.9719 42.1239Z"
          fill="#D9D9D9"
        />
        <path
          opacity="0.2"
          d="M53 33.4634C48.4884 36.489 40.7673 38.4835 32 38.4835C23.2327 38.4835 15.5116 36.489 11 33.4634V38.511C11 41.8247 13.6863 44.511 17 44.511H47C50.3137 44.511 53 41.8247 53 38.511V33.4634Z"
          fill="black"
        />
      </g>
      <defs>
        <clipPath id="clip0_9_207">
          <rect width="64" height="64" fill="white" />
        </clipPath>
      </defs>
    </svg>
  );
};
